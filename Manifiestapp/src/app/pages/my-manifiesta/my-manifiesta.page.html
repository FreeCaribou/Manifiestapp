<app-header [title]="'MyManifiesta'"></app-header>

<ion-content>

  <!-- Must have own ion-segment because we can't stop propagation of click event -->
  <ion-list class="btn-lang-box">
    <button [disabled]="languageCommunication.selectedLanguage === 'fr'" (click)="presentModalSelectLang('fr')">
      FR
    </button>
    <button [disabled]="languageCommunication.selectedLanguage === 'nl'" (click)="presentModalSelectLang('nl')">
      NL
    </button>
  </ion-list>

  <ion-toolbar *ngIf="haveConflict" color="warning">
    <ion-title>
      <ion-icon name="alert-circle-outline"></ion-icon> {{ 'Programme.HaveConflict' | translate }}
    </ion-title>
  </ion-toolbar>

  <!-- Options -->
  <ion-accordion-group>
    <ion-accordion value="opties">
      <ion-item slot="header">
        <ion-label>{{'General.Options' | translate }}</ion-label>
      </ion-item>
      <div slot="content">
        TODO - Select lang - Notif autorisation
      </div>
    </ion-accordion>
  </ion-accordion-group>

  <!-- Favorite Programme -->
  <ion-accordion-group value="favoriteProgramme">
    <ion-accordion value="favoriteProgramme">
      <ion-item slot="header">
        <ion-label>{{'Programme.YourFavoris' | translate }}</ion-label>
      </ion-item>
      <div slot="content">
        <div *ngIf="list">
          <a [routerLink]="['/programme']">
            <h2 *ngIf="list?.length === 0">{{ 'Programme.NoFavorites' | translate }}</h2>
          </a>
          <div *ngIf="list?.length > 0">
            <!-- TODO have button to switch list to card -->
            <!-- <app-event-list-card [list]="list" [dateJustWithHour]="dateJustWithHour"></app-event-list-card> -->
            <!-- Try with a list view what it's look like -->
            <app-event-list [list]="list" [dateJustWithHour]="dateJustWithHour"></app-event-list>
          </div>
        </div>
      </div>
    </ion-accordion>
  </ion-accordion-group>

  <!-- Shifts Volunteers -->
  <ion-accordion-group value="shiftsVolunteers">
    <ion-accordion value="shiftsVolunteers">
      <ion-item slot="header">
        <ion-label>{{'General.ShiftsVolunteers' | translate }}</ion-label>
      </ion-item>
      <div slot="content">

        <form *ngIf="!isConnected && loginForm" [formGroup]="loginForm">
          <ion-grid>

            <ion-item>
              <ion-label color="primary" position="floating">
                {{"User.Email" | translate}}
              </ion-label>
              <ion-input clearInput type="email" formControlName="email" required></ion-input>
            </ion-item>

            <ion-item>
              <ion-label color="primary" position="floating">
                {{"User.Password" | translate}}
              </ion-label>
              <ion-input clearInput type="password" formControlName="password" required></ion-input>
            </ion-item>

            <ion-button class="padding-not-stick-edges" (click)="clickOnLogin()" color="tertiary" expand="block"
              [disabled]="!loginForm.valid">
              {{'User.Login' | translate}}
              <ion-icon slot="end" icon="person"></ion-icon>
            </ion-button>

          </ion-grid>
        </form>

        <div *ngIf="isConnected">
          <ion-button color="danger" (click)="clickOnLogout()">Logout</ion-button>
          <ion-list >
            <ion-item *ngFor="let s of shifts">
              <p>Titre: {{s.team.full_name}}</p>
              <p>Function: {{s.team.function?.name}}</p>
              <p>Hour Begin: {{s.team.shifts[0]?.start_datetime | date:'short' }}</p>
              <p>Hour End: {{s.team.shifts[0]?.end_datetime | date:'short' }}</p>
            </ion-item>
          </ion-list>
        </div>
 
      </div>
    </ion-accordion>
  </ion-accordion-group>

</ion-content>
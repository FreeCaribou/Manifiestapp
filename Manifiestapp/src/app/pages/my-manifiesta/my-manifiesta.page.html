<app-header [title]="'MyManifiesta'"></app-header>

<ion-content>

  <div *ngIf="haveConflict" class="favorites-conflict-warning-bar" color="warning">
    <h5 class="favorites-conflict-warning-text">
      <ion-icon name="alert-circle-outline"></ion-icon>
      {{ 'Programme.HaveConflict' | translate }}
    </h5>
  </div>

  <!-- Options -->
  <ion-accordion-group value="opties">
    <ion-accordion value="opties">
      <ion-item slot="header">
        <ion-label>{{'General.Options' | translate }}</ion-label>
      </ion-item>
      <div slot="content">
        <div class="m-right-16 m-left-16">
          <ion-list class="btn-lang-box">
            <ion-button [disabled]="languageCommunication.selectedLanguage === 'fr'" size="small"
              (click)="presentModalSelectLang('fr')"
              [color]="languageCommunication.selectedLanguage === 'fr' ? 'warning' : 'secondary'"
              [fill]="languageCommunication.selectedLanguage === 'fr' ? 'outline' : 'solid'">
              FR
            </ion-button>
            <ion-button [disabled]="languageCommunication.selectedLanguage === 'nl'" size="small"
              (click)="presentModalSelectLang('nl')"
              [color]="languageCommunication.selectedLanguage === 'nl' ? 'warning' : 'secondary'"
              [fill]="languageCommunication.selectedLanguage === 'nl' ? 'outline' : 'solid'">
              NL
            </ion-button>
          </ion-list>

          <ion-item>
            <ion-label>{{'User.AcceptNotification' | translate}}</ion-label>
            <ion-checkbox name="accept-notification" [value]="acceptNotification" [checked]="acceptNotification"
              color="secondary" (ionChange)="onChangeAcceptNotification($event)"></ion-checkbox>
          </ion-item>
        </div>
      </div>
    </ion-accordion>
  </ion-accordion-group>

  <!-- Favorite Programme -->
  <ion-accordion-group value="favoriteProgramme">
    <ion-accordion value="favoriteProgramme">
      <ion-item slot="header">
        <ion-label>{{'Programme.YourFavoris' | translate }}</ion-label>
      </ion-item>
      <div slot="content">
        <div *ngIf="list">
          <a [routerLink]="['/programme']">
            <p *ngIf="list?.length === 0" class="m-right-16 m-left-16">{{ 'Programme.NoFavorites' | translate }}</p>
          </a>
          <div *ngIf="list?.length > 0">
            <!-- <app-event-list-card [list]="list" [dateJustWithHour]="dateJustWithHour"></app-event-list-card> -->
            <!-- Try with a list view what it's look like -->
            <app-event-list [list]="list" [dateJustWithHour]="dateJustWithHour"></app-event-list>
          </div>
        </div>
      </div>
    </ion-accordion>
  </ion-accordion-group>

  <!-- Shifts Volunteers -->
  <ion-accordion-group value="shiftsVolunteers">
    <ion-accordion value="shiftsVolunteers">
      <ion-item slot="header">
        <ion-label>{{'General.ShiftsVolunteers' | translate }}</ion-label>
      </ion-item>
      <div slot="content">

        <form *ngIf="!isConnected && loginForm" [formGroup]="loginForm">
          <ion-grid>
            <p [innerHtml]="'User.ConnectionBeeple' | translate" class="m-right-16 m-left-16"></p>
            <ion-item>
              <ion-label color="primary" position="stacked">
                {{"User.Email" | translate}}
              </ion-label>
              <ion-input clearInput type="email" formControlName="email" required placeholder="email@something.be">
              </ion-input>
            </ion-item>

            <ion-item>
              <ion-label color="primary" position="stacked">
                {{"User.Password" | translate}}
              </ion-label>
              <ion-input clearInput type="password" formControlName="password" required placeholder="azerty1234">
              </ion-input>
            </ion-item>

            <ion-button class="padding-not-stick-edges" (click)="clickOnLogin()" color="secondary" expand="block"
              [disabled]="!loginForm.valid">
              {{'User.Login' | translate}}
              <ion-icon slot="end" icon="person"></ion-icon>
            </ion-button>

            <p class="m-right-16 m-left-16">{{'User.ConnectionProblem' | translate}}</p>

          </ion-grid>
        </form>

        <div *ngIf="isConnected">
          <ion-list>
            <ion-item *ngFor="let s of shifts">
              <ion-label>
                <h2>{{s.team.happening}}</h2>
                <p>
                  {{s.team.function?.name}}:
                  {{s.team.shifts[0]?.start_datetime | date:'dd/MM HH:mm' }} - {{s.team.shifts[0]?.end_datetime |
                  date:'dd/MM HH:mm' }}
                </p>
              </ion-label>
            </ion-item>
          </ion-list>
          <ion-button color="danger" (click)="clickOnLogout()">Logout</ion-button>
        </div>

      </div>
    </ion-accordion>
  </ion-accordion-group>

</ion-content>
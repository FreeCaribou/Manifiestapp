{"ast":null,"code":"import { WagtailApiEventItem } from 'src/app/shared/models/Event.interface';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/shared/services/data/programme/programme.service\";\nimport * as i3 from \"src/app/shared/services/data/info-list/info-list.service\";\nimport * as i4 from \"src/app/shared/services/communication/loading.communication.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@ionic/angular\";\nimport * as i8 from \"../../shared/components/event-list-card/event-list-card.component\";\nimport * as i9 from \"@ngx-translate/core\";\n\nfunction SubprogrammePage_ion_item_14_ion_select_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const v_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", v_r3.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(v_r3.name);\n  }\n}\n\nfunction SubprogrammePage_ion_item_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-select\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function SubprogrammePage_ion_item_14_Template_ion_select_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.locatieSelected = $event);\n    })(\"ionChange\", function SubprogrammePage_ion_item_14_Template_ion_select_ionChange_4_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.onSelectChange());\n    });\n    i0.ɵɵelementStart(5, \"ion-select-option\", 9);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, SubprogrammePage_ion_item_14_ion_select_option_8_Template, 2, 2, \"ion-select-option\", 10);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 5, \"Programme.Locations\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.locatieSelected);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 7, \"General.All\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.locaties);\n  }\n}\n\nfunction SubprogrammePage_ion_item_15_ion_select_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const c_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", c_r8.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(c_r8.name);\n  }\n}\n\nfunction SubprogrammePage_ion_item_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-select\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function SubprogrammePage_ion_item_15_Template_ion_select_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.categorieSelected = $event);\n    })(\"ionChange\", function SubprogrammePage_ion_item_15_Template_ion_select_ionChange_4_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.onSelectChange());\n    });\n    i0.ɵɵelementStart(5, \"ion-select-option\", 9);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, SubprogrammePage_ion_item_15_ion_select_option_8_Template, 2, 2, \"ion-select-option\", 10);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 5, \"Programme.Categories\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.categorieSelected);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 7, \"General.All\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.categories);\n  }\n}\n\nexport let SubprogrammePage = /*#__PURE__*/(() => {\n  class SubprogrammePage {\n    constructor(activatedRoute, programmeService, infoListService, loadingCommunication) {\n      this.activatedRoute = activatedRoute;\n      this.programmeService = programmeService;\n      this.infoListService = infoListService;\n      this.loadingCommunication = loadingCommunication; // organizers: any[];\n      // organizerSelected: any;\n\n      this.showFilters = false; // for the internet connection\n\n      this.connected = true;\n    }\n\n    ionViewWillEnter() {\n      this.dayId = this.activatedRoute.snapshot.params.dayId;\n      this.initList();\n      this.programmeService.cacheBigBlobProgrammeChangeEmit$.subscribe(() => {\n        this.initList();\n      }); // Network.getStatus().then(n => {\n      //   this.connected = n.connected;\n      //   if (this.connected) {\n      //     this.loadingCommunication.changeLoaderTo(true);\n      //     forkJoin([\n      //       this.programmeService.getAllProgrammeFilter([this.dayId]),\n      //       this.infoListService.getVenues(),\n      //       this.infoListService.getEventCategories(),\n      //       // this.infoListService.getOrganizers(),\n      //     ]).subscribe(datas => {\n      //       this.list = datas[0];\n      //       this.listToShow = this.list;\n      //       this.locaties = datas[1];\n      //       this.categories = datas[2];\n      //       // this.organizers = datas[3];\n      //     }).add(() => { this.loadingCommunication.changeLoaderTo(false); });\n      //     this.programmeService.verificationFavoriteLoadEmit.subscribe(load => this.loadingCommunication.changeLoaderTo(load));\n      //   } else {\n      //     this.list = this.programmeService.getOfflineProgrammesList([this.dayId]);\n      //     this.listToShow = this.list;\n      //   }\n      // });\n    }\n\n    initList() {\n      this.list = this.programmeService.cacheBigBlobProgramme.filter(p => p.api_event_dates[0].day === this.dayId);\n      this.listToShow = this.list;\n      this.locaties = [...new Set(this.list.map(i => i.api_location.name))].map(i => {\n        return {\n          id: i,\n          name: i\n        };\n      }).sort((a, b) => {\n        return a.name > b.name ? 1 : -1;\n      });\n      this.categories = [...new Set(this.list.map(i => i.api_categories.primary.join()).filter(i => i).join().split(',').concat(this.list.map(i => i.api_categories.secondary.join()).filter(i => i).join().split(',')))].map(i => {\n        return {\n          id: i,\n          name: i\n        };\n      }).sort((a, b) => {\n        return a.name > b.name ? 1 : -1;\n      });\n    }\n\n    onSelectChange() {\n      this.makeFilter(); // this.loadingCommunication.changeLoaderTo(true);\n      // this.programmeService.getAllProgrammeFilter(\n      //   [this.dayId],\n      //   this.locatieSelected ? [this.locatieSelected] : null,\n      //   this.categorieSelected ? [this.categorieSelected] : null,\n      //   // this.organizerSelected ? [this.organizerSelected] : null,\n      // ).subscribe(data => {\n      //   this.list = data;\n      //   this.listToShow = this.list;\n      //   this.onSearchChange();\n      // }).add(() => { this.loadingCommunication.changeLoaderTo(false); });\n    }\n\n    ionViewWillLeave() {\n      this.list = [];\n    }\n\n    onSearchChange() {\n      this.makeFilter();\n    }\n\n    makeFilter() {\n      var _a;\n\n      this.listToShow = this.list;\n\n      if (this.search && ((_a = this.search) === null || _a === void 0 ? void 0 : _a.trim()) !== '') {\n        this.listToShow = this.listToShow.filter(x => x.title.toLowerCase().includes(this.search.toLowerCase()));\n      }\n\n      if (this.locatieSelected) {\n        this.listToShow = this.listToShow.filter(e => e.api_location.name == this.locatieSelected);\n      }\n\n      if (this.categorieSelected) {\n        this.listToShow = this.listToShow.filter(e => e.api_categories.primary.includes(this.categorieSelected) || e.api_categories.secondary.includes(this.categorieSelected));\n      }\n    }\n\n  }\n\n  SubprogrammePage.ɵfac = function SubprogrammePage_Factory(t) {\n    return new (t || SubprogrammePage)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ProgrammeService), i0.ɵɵdirectiveInject(i3.InfoListService), i0.ɵɵdirectiveInject(i4.LoadingCommunicationService));\n  };\n\n  SubprogrammePage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SubprogrammePage,\n    selectors: [[\"app-subprogramme\"]],\n    decls: 17,\n    vars: 13,\n    consts: [[\"value\", \"filter\"], [\"slot\", \"header\"], [\"slot\", \"content\"], [\"color\", \"primary\", \"position\", \"stacked\"], [\"clearInput\", \"\", \"type\", \"text\", 3, \"placeholder\", \"ngModel\", \"ngModelChange\"], [4, \"ngIf\"], [3, \"list\"], [\"position\", \"floating\"], [\"interface\", \"popover\", 3, \"ngModel\", \"ngModelChange\", \"ionChange\"], [3, \"value\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"]],\n    template: function SubprogrammePage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-content\")(1, \"ion-accordion-group\")(2, \"ion-accordion\", 0)(3, \"ion-item\", 1)(4, \"ion-label\");\n        i0.ɵɵtext(5);\n        i0.ɵɵpipe(6, \"translate\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"ion-list\", 2)(8, \"ion-item\")(9, \"ion-label\", 3);\n        i0.ɵɵtext(10);\n        i0.ɵɵpipe(11, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"ion-input\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function SubprogrammePage_Template_ion_input_ngModelChange_12_listener($event) {\n          return ctx.search = $event;\n        })(\"ngModelChange\", function SubprogrammePage_Template_ion_input_ngModelChange_12_listener() {\n          return ctx.onSearchChange();\n        });\n        i0.ɵɵpipe(13, \"translate\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(14, SubprogrammePage_ion_item_14_Template, 9, 9, \"ion-item\", 5);\n        i0.ɵɵtemplate(15, SubprogrammePage_ion_item_15_Template, 9, 9, \"ion-item\", 5);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(16, \"app-event-list-card\", 6);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 7, \"Programme.Filter\"));\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(11, 9, \"Programme.Search\"), \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"placeholder\", i0.ɵɵpipeBind1(13, 11, \"Programme.Search\"))(\"ngModel\", ctx.search);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.locaties && ctx.connected);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.categories && ctx.connected);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"list\", ctx.listToShow);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i6.NgControlStatus, i6.NgModel, i7.IonAccordion, i7.IonAccordionGroup, i7.IonContent, i7.IonInput, i7.IonItem, i7.IonLabel, i7.IonList, i7.IonSelect, i7.IonSelectOption, i7.SelectValueAccessor, i7.TextValueAccessor, i8.EventListCardComponent, i9.TranslatePipe],\n    encapsulation: 2\n  });\n  return SubprogrammePage;\n})();","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { forkJoin } from 'rxjs';\nimport { LocalStorageEnum } from 'src/app/shared/models/LocalStorage.enum';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/services/communication/loading.communication.service\";\nimport * as i2 from \"src/app/shared/services/data/selling/selling.service\";\nimport * as i3 from \"src/app/shared/services/data/volunteer-shift/volunteer-shift.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@ionic/angular\";\nimport * as i6 from \"../../../shared/components/header/header.component\";\nimport * as i7 from \"../../../shared/components/top-seller-list/top-seller-list.component\";\nimport * as i8 from \"../../../shared/components/my-selling-little-recap/my-selling-little-recap.component\";\nimport * as i9 from \"@ngx-translate/core\";\n\nfunction SellingMyDetailsPage_div_2_ion_card_10_p_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const sell_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind1(2, 2, \"Ticket.Price\"), \" \", sell_r5.ticketInfoPrice, \"\");\n  }\n}\n\nfunction SellingMyDetailsPage_div_2_ion_card_10_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const sell_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", sell_r5.sellerPostalCode, \" \");\n  }\n}\n\nfunction SellingMyDetailsPage_div_2_ion_card_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-card-header\")(2, \"ion-card-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ion-card-subtitle\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"ion-card-content\");\n    i0.ɵɵtemplate(9, SellingMyDetailsPage_div_2_ion_card_10_p_9_Template, 3, 4, \"p\", 1);\n    i0.ɵɵelementStart(10, \"p\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p\");\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"translate\");\n    i0.ɵɵtemplate(16, SellingMyDetailsPage_div_2_ion_card_10_span_16_Template, 2, 1, \"span\", 1);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const sell_r5 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate3(\"\", sell_r5.quantity, \" \", i0.ɵɵpipeBind1(4, 10, \"Ticket.Ticket(s)At\"), \" \", sell_r5.clientName, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(7, 12, sell_r5.date, \"dd/MM/YY HH:mm\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", sell_r5.ticketInfoPrice);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind1(12, 15, \"Ticket.TicketReference\"), \" \", sell_r5.eventsquareReference, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind1(15, 17, \"Ticket.Department\"), \" \", sell_r5.sellerDepartment, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", sell_r5.sellerDepartmentId === \"BASE\");\n  }\n}\n\nfunction SellingMyDetailsPage_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 2);\n    i0.ɵɵelement(2, \"app-my-selling-little-recap\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ion-accordion-group\")(4, \"ion-accordion\", 4)(5, \"ion-item\", 5)(6, \"ion-label\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 6);\n    i0.ɵɵtemplate(10, SellingMyDetailsPage_div_2_ion_card_10_Template, 17, 19, \"ion-card\", 7);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"mySellingInfo\", ctx_r0.mySellingInfo)(\"sellerSellingGoal\", ctx_r0.sellerSellingGoal);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 4, \"Ticket.MySelling\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.mySellingInfo.data);\n  }\n}\n\nfunction SellingMyDetailsPage_div_3_ion_label_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-label\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"Ticket.BestSellerMyPostalCode\"));\n  }\n}\n\nfunction SellingMyDetailsPage_div_3_ion_label_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-label\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"Ticket.BestSellerMyDepartmentWorker\"));\n  }\n}\n\nfunction SellingMyDetailsPage_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"ion-accordion-group\")(2, \"ion-accordion\", 8)(3, \"ion-item\", 5);\n    i0.ɵɵtemplate(4, SellingMyDetailsPage_div_3_ion_label_4_Template, 3, 3, \"ion-label\", 1);\n    i0.ɵɵtemplate(5, SellingMyDetailsPage_div_3_ion_label_5_Template, 3, 3, \"ion-label\", 1);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 6);\n    i0.ɵɵelement(7, \"app-top-seller-list\", 9);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.isFromWorkingGroup);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isFromWorkingGroup);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"list\", ctx_r1.bestSellingPostalCode)(\"total\", ctx_r1.sellingPostalCodeAccount);\n  }\n}\n\nfunction SellingMyDetailsPage_div_4_ion_label_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-label\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"Ticket.BestSellerOurDepartment\"));\n  }\n}\n\nfunction SellingMyDetailsPage_div_4_ion_label_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-label\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"Ticket.BestSellerOurProvince\"));\n  }\n}\n\nfunction SellingMyDetailsPage_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"ion-accordion-group\")(2, \"ion-accordion\", 10)(3, \"ion-item\", 5);\n    i0.ɵɵtemplate(4, SellingMyDetailsPage_div_4_ion_label_4_Template, 3, 3, \"ion-label\", 1);\n    i0.ɵɵtemplate(5, SellingMyDetailsPage_div_4_ion_label_5_Template, 3, 3, \"ion-label\", 1);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 6);\n    i0.ɵɵelement(7, \"app-top-seller-list\", 11);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.myDepartment !== \"BASE\" || ctx_r2.isFromWorkingGroup);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.myDepartment === \"BASE\" && !ctx_r2.isFromWorkingGroup);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"list\", ctx_r2.bestSellingDepartment);\n  }\n}\n\nfunction SellingMyDetailsPage_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"ion-accordion-group\")(2, \"ion-accordion\", 12)(3, \"ion-item\", 5)(4, \"ion-label\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 6);\n    i0.ɵɵelement(8, \"app-top-seller-list\", 11);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 2, \"Ticket.BestSellerNational\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"list\", ctx_r3.bestSellingAll);\n  }\n}\n\nexport let SellingMyDetailsPage = /*#__PURE__*/(() => {\n  class SellingMyDetailsPage {\n    constructor(loadingCommunication, sellingService, volunteerShiftService) {\n      this.loadingCommunication = loadingCommunication;\n      this.sellingService = sellingService;\n      this.volunteerShiftService = volunteerShiftService;\n      this.isFromWorkingGroup = localStorage.getItem(LocalStorageEnum.SellerFromWorkGroup);\n      this.myDepartment = localStorage.getItem(LocalStorageEnum.SellerDepartment);\n      this.defaultHref = '/selling';\n    }\n\n    get sellerSendingDataI18NParam() {\n      var _a, _b, _c;\n\n      return {\n        totalSelling: (_b = (_a = this.mySellingInfo) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.length,\n        totalTickets: (_c = this.mySellingInfo) === null || _c === void 0 ? void 0 : _c.totalAmountTicket\n      };\n    }\n\n    ionViewDidEnter() {\n      this.loadingCommunication.changeLoaderTo(true);\n      forkJoin([this.sellingService.getMySellingInformation(), this.sellingService.getMyCurrentDepartmentSellingInformation(), this.sellingService.getMyCurrentPostCodeSellingInformation(), this.sellingService.getAllSellingInformation()]).subscribe(data => {\n        this.mySellingInfo = data[0];\n        this.totalAmountTicket = this.mySellingInfo.totalAmountTicket;\n        this.sellerSellingGoal = this.volunteerShiftService.getSellerSellingGoal();\n        this.mySellingInfo.data = this.mySellingInfo.data.map(d => {\n          var _a;\n\n          let ticketInfoPrice = 0;\n          (_a = d.ticketInfo) === null || _a === void 0 ? void 0 : _a.forEach(d => {\n            ticketInfoPrice += d.ticketPrice * d.ticketAmount;\n          });\n\n          if (isNaN(ticketInfoPrice)) {\n            ticketInfoPrice = null;\n          }\n\n          return Object.assign(Object.assign({}, d), {\n            ticketInfoPrice\n          });\n        });\n        this.bestSellingDepartment = data[1];\n        this.bestSellingPostalCode = data[2].bestSelling;\n        this.sellingPostalCodeAccount = data[2].totalAmountTicket;\n        this.bestSellingAll = data[3];\n      }).add(() => {\n        this.loadingCommunication.changeLoaderTo(false);\n      });\n    }\n\n  }\n\n  SellingMyDetailsPage.ɵfac = function SellingMyDetailsPage_Factory(t) {\n    return new (t || SellingMyDetailsPage)(i0.ɵɵdirectiveInject(i1.LoadingCommunicationService), i0.ɵɵdirectiveInject(i2.SellingService), i0.ɵɵdirectiveInject(i3.VolunteerShiftService));\n  };\n\n  SellingMyDetailsPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SellingMyDetailsPage,\n    selectors: [[\"app-selling-my-details\"]],\n    decls: 6,\n    vars: 5,\n    consts: [[\"title\", \"MySellingDetails\", 3, \"defaultHref\"], [4, \"ngIf\"], [1, \"m-right-medium\", \"m-left-medium\"], [3, \"mySellingInfo\", \"sellerSellingGoal\"], [\"value\", \"mySelings\"], [\"slot\", \"header\"], [\"slot\", \"content\"], [4, \"ngFor\", \"ngForOf\"], [\"value\", \"bestSellingPostalCode\"], [3, \"list\", \"total\"], [\"value\", \"myDepartmentBestSelings\"], [3, \"list\"], [\"value\", \"bestSellingAll\"]],\n    template: function SellingMyDetailsPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-header\", 0);\n        i0.ɵɵelementStart(1, \"ion-content\");\n        i0.ɵɵtemplate(2, SellingMyDetailsPage_div_2_Template, 11, 6, \"div\", 1);\n        i0.ɵɵtemplate(3, SellingMyDetailsPage_div_3_Template, 8, 4, \"div\", 1);\n        i0.ɵɵtemplate(4, SellingMyDetailsPage_div_4_Template, 8, 3, \"div\", 1);\n        i0.ɵɵtemplate(5, SellingMyDetailsPage_div_5_Template, 9, 4, \"div\", 1);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"defaultHref\", ctx.defaultHref);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.mySellingInfo);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.bestSellingPostalCode);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.bestSellingDepartment);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.bestSellingAll);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i5.IonAccordion, i5.IonAccordionGroup, i5.IonCard, i5.IonCardContent, i5.IonCardHeader, i5.IonCardSubtitle, i5.IonCardTitle, i5.IonContent, i5.IonItem, i5.IonLabel, i6.HeaderComponent, i7.TopSellerListComponent, i8.MySellingLittleRecapComponent, i4.DatePipe, i9.TranslatePipe],\n    encapsulation: 2\n  });\n  return SellingMyDetailsPage;\n})();","map":null,"metadata":{},"sourceType":"module"}